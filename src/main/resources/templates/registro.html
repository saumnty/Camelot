<!DOCTYPE html>
<html lang="en" xml:lang="en">

<head>
  <meta charset="UTF-8">
  <title>Registro</title>
  <link rel="canonical" href="index.html">
  <link rel="stylesheet" th:href="@{/css/styles.css}">
  <link rel="stylesheet" th:href="@{/css/signup.css}">

  <meta name="description" content="Created with figma.to.website">
  <meta property="og:url" content="index.html">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Registro">
  <meta property="og:description" content="Created with figma.to.website">
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image"
    content="../cdn-cgi/imagedelivery/s-dfVpmPR-aKHmwFNwAgnQ/hedvige-xddzgxsai9.figweb.site-4b88b2b0cad61ab72053b14352c4d58217bba900/public.jpg">
  <meta name="twitter:title" content="Registro">
  <meta name="twitter:description" content="Created with figma.to.website">
  <meta name="twitter:image:type" content="image/jpeg">
  <meta name="twitter:image:width" content="1200">
  <meta name="twitter:image:height" content="630">
  <meta name="twitter:image"
    content="../cdn-cgi/imagedelivery/s-dfVpmPR-aKHmwFNwAgnQ/hedvige-xddzgxsai9.figweb.site-4b88b2b0cad61ab72053b14352c4d58217bba900/public.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="alternate" type="application/rss+xml" title="hedvige-xddzgxsai9.figweb.site feed" href="../feed/en.html">
  <meta name="viewport" content="width=device-width">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
  <script></script>
  <script>window.F2W_REACTIONS = (() => { const n = []; return {} })(), window.F2W_VARIABLES = {}, window.F2W_COLLECTION_VARS = {}, window.F2W_COLLECTION_MODE_BPS = {}, window.F2W_COLOR_SCHEMES = void 0, window.F2W_LANGUAGES = void 0;
  </script>
  <script th:src="@{/js/signup.js}" defer></script>
  <script src="../__assets/runtime-9cb008d88f0d2498de069d7e0f61e223f992206b.js"></script>
 

</head>

<body id="_">
  <div id="Registro">
    <div id="Header">
      <div id="Top_Navbar">
        <div id="Icons">
          <div id="Icon_inbox">
          </div>
          <div id="Icon_arrows_expand">
          </div>
        </div>
        <div id="Icon_question_mark_circle">
          <svg preserveAspectRatio="none" id="Icon" class="pointer-events-none" width="26" height="26"
            viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M25.6 12.8C25.6 19.8692 19.8692 25.6 12.8 25.6C5.73076 25.6 0 19.8692 0 12.8C0 5.73076 5.73076 0 12.8 0C19.8692 0 25.6 5.73076 25.6 12.8ZM12.8 8C12.2098 8 11.6922 8.31875 11.4131 8.80116C10.9706 9.56606 9.99186 9.82744 9.22696 9.38497C8.46207 8.9425 8.20069 7.96374 8.64316 7.19884C9.47068 5.76829 11.0213 4.8 12.8 4.8C15.451 4.8 17.6 6.94903 17.6 9.6C17.6 11.69 16.2643 13.4679 14.4 14.1269V14.4C14.4 15.2837 13.6837 16 12.8 16C11.9164 16 11.2 15.2837 11.2 14.4V12.8C11.2 11.9163 11.9164 11.2 12.8 11.2C13.6837 11.2 14.4 10.4837 14.4 9.6C14.4 8.71634 13.6837 8 12.8 8ZM12.8 20.8C13.6837 20.8 14.4 20.0837 14.4 19.2C14.4 18.3163 13.6837 17.6 12.8 17.6C11.9163 17.6 11.2 18.3163 11.2 19.2C11.2 20.0837 11.9163 20.8 12.8 20.8Z"
              fill="#64748B"></path>
          </svg>
        </div>
      </div>
      <div id="Ringku_Logo">
        <svg preserveAspectRatio="none" id="Union" class="pointer-events-none" width="25" height="30"
          viewBox="0 0 25 30" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M4.83228 8.31641L4.7229 8.44043C4.69089 8.47473 4.65889 8.50899 4.62915 8.54785C4.59936 8.5868 4.56714 8.62154 4.53735 8.6582C4.50759 8.69484 4.47761 8.73388 4.44556 8.77051L4.29419 8.96289C4.2692 8.99245 4.24631 9.02414 4.22583 9.05371L4.08813 9.24023L4.02173 9.3291C3.61899 9.89812 3.26873 10.5026 2.97485 11.1348L2.92603 11.2402C2.90317 11.2883 2.88313 11.3367 2.86255 11.3848V11.4004C2.84655 11.4347 2.81875 11.469 2.8186 11.501L2.76587 11.625C2.75446 11.6569 2.74116 11.6913 2.72974 11.7188C2.71828 11.7462 2.69751 11.7762 2.69751 11.8037C2.61961 12.0008 2.54584 12.205 2.48169 12.4043C2.46802 12.4408 2.46122 12.4686 2.44751 12.5098C2.43375 12.5509 2.4104 12.592 2.4104 12.6309C2.32793 12.9378 2.24603 13.2545 2.18188 13.5684C2.17048 13.614 2.15847 13.6662 2.15161 13.7051C2.14474 13.744 2.13602 13.7791 2.12915 13.8203C2.12235 13.8614 2.12455 13.9139 2.10864 13.9414C2.0926 13.9689 2.10808 13.9943 2.09204 14.0264C2.07617 14.0583 2.08556 14.0679 2.07642 14.125C2.06724 14.1822 2.05103 14.2394 2.05103 14.292L2.03735 14.3857C2.03048 14.4407 2.01685 14.4984 2.01685 14.5488C2.00774 14.5898 2.00321 14.6286 2.00317 14.665L1.98267 14.8506V14.9746L1.96899 15.1172V15.2754C1.94842 15.5042 1.94751 15.7331 1.94751 15.9619C1.9452 18.2492 2.62346 20.4863 3.89478 22.3877C5.16608 24.289 6.97368 25.7697 9.08813 26.6416C11.2027 27.5135 13.5287 27.7369 15.7708 27.2842C18.0127 26.8314 20.0695 25.7227 21.6799 24.0986L22.1702 23.6055L22.1565 23.5918C22.6796 22.9934 23.1406 22.3434 23.5315 21.6514L24.8879 23.0762C23.9029 24.6643 22.5978 26.0301 21.0559 27.0859C19.5139 28.1418 17.7687 28.8649 15.9319 29.209C14.095 29.5531 12.2066 29.511 10.387 29.085C8.5674 28.6589 6.85662 27.8582 5.36353 26.7344C3.87055 25.6106 2.62797 24.1881 1.71509 22.5576C0.802186 20.9269 0.238334 19.1231 0.060791 17.2627C-0.116671 15.4025 0.0958999 13.5257 0.683838 11.752C1.2718 9.97812 2.22232 8.34592 3.47583 6.95996L4.83228 8.31641ZM10.2327 8.52246C9.27431 8.9337 8.40202 9.52169 7.6604 10.2549C6.14811 11.7535 5.27506 13.7797 5.22485 15.9082C5.17474 18.0368 5.95073 20.1026 7.39087 21.6709C8.83103 23.2392 10.8233 24.1883 12.9485 24.3193C15.0735 24.4503 17.1665 23.7525 18.7883 22.373L20.1448 23.7295L20.0901 23.7773L19.9094 23.9316L19.8127 24.0117L19.7161 24.0869L19.6936 24.1035L19.636 24.1484L19.5422 24.2227L19.4553 24.2861L19.4045 24.3232L19.3342 24.373H19.3206L19.2258 24.4395C19.1114 24.5196 19.0066 24.5889 18.9036 24.6553L18.6741 24.7969L18.5344 24.8799L18.47 24.916C18.2661 25.0306 18.0551 25.1414 17.842 25.2422L17.7395 25.292H17.719L17.6497 25.3223L17.5217 25.3789L17.3792 25.4414L17.2356 25.498L17.1477 25.5332C17.1113 25.5491 17.0725 25.5625 17.0315 25.5762L16.9514 25.6084H16.9329L16.8665 25.6338L16.6116 25.7188L16.5295 25.7432L16.4153 25.7803L16.3391 25.8027H16.3254L16.2659 25.8213L16.1877 25.8418L16.0891 25.8701L15.9661 25.9014H15.9202L15.7415 25.9434L15.4709 26L15.3674 26.0186H15.3567L15.2756 26.0322H15.2649L15.1643 26.0488C15.0452 26.0694 14.9211 26.0875 14.7952 26.1035H14.4485L14.3118 26.1172H13.4866C12.1533 26.1198 10.8322 25.858 9.60083 25.3467C8.36959 24.8354 7.25203 24.0848 6.31274 23.1387L6.28052 23.2764C5.33657 22.3321 4.58833 21.2105 4.07837 19.9766C3.56843 18.7427 3.30692 17.4201 3.30884 16.085C3.31078 14.7501 3.57577 13.4285 4.08911 12.1963C4.60255 10.964 5.35452 9.84477 6.30103 8.90332C7.03562 8.17487 7.87641 7.56142 8.79419 7.08398L10.2327 8.52246ZM6.68384 0.907227C9.41101 -0.148129 12.4081 -0.286759 15.2209 0.512695C18.0337 1.31213 20.5093 3.00609 22.2737 5.33789C24.0381 7.66983 24.9956 10.5133 25.0002 13.4375C25.0105 16.7782 23.7715 20.0024 21.5266 22.4766L20.1702 21.1201C20.2091 21.0789 20.2439 21.0373 20.2805 20.9961L20.3743 20.8857L20.4592 20.7832L20.551 20.6729L20.7014 20.4785C20.7266 20.4487 20.7501 20.4162 20.7708 20.3887L20.9104 20.2012L20.9749 20.1113C21.3779 19.5428 21.7285 18.9388 22.0217 18.3066C22.04 18.2724 22.0556 18.2377 22.0715 18.2012L22.134 18.0586V18.043L22.1799 17.9395C22.1959 17.8984 22.2138 17.8549 22.2297 17.8184L22.2961 17.708L22.3313 17.626C22.4069 17.429 22.4797 17.225 22.5461 17.0234C22.5576 16.9868 22.5624 16.9614 22.5784 16.918C22.5944 16.8744 22.6056 16.8306 22.6194 16.7871C22.6996 16.4824 22.7824 16.1635 22.8489 15.8496L22.8762 15.7148C22.8831 15.6736 22.8918 15.6389 22.8987 15.5977C22.9055 15.5565 22.9042 15.5082 22.9202 15.4785C22.9359 15.4489 22.9312 15.4235 22.9358 15.3916C22.9403 15.3597 22.9423 15.3527 22.9514 15.2959C22.9606 15.2386 22.9768 15.1787 22.9768 15.126L22.9905 15.0342C22.9973 14.9769 22.9972 14.9104 23.011 14.8691C23.0247 14.8281 23.0247 14.7894 23.0247 14.7529L23.0461 14.5674C23.0576 14.5262 23.0569 14.4891 23.0569 14.4434V14.1338C23.0775 13.9047 23.0774 13.6754 23.0774 13.4463C23.0767 11.1614 22.3983 8.92803 21.1272 7.0293C19.8559 5.13051 18.0492 3.65145 15.9368 2.78027C13.8242 1.90912 11.5003 1.68492 9.26001 2.13574C7.01983 2.58656 4.96393 3.69206 3.35278 5.3125L2.86255 5.80273L2.87817 5.81934C2.35438 6.41708 1.89329 7.06733 1.50317 7.75977L0.105713 6.3623C1.64761 3.87774 3.95681 1.96261 6.68384 0.907227ZM11.5461 3.30078C13.8198 3.30226 16.0275 4.0671 17.8147 5.47266C19.6018 6.87824 20.8653 8.84348 21.4026 11.0527C21.9398 13.262 21.7197 15.5879 20.7776 17.6572C19.8354 19.7265 18.2254 21.4195 16.2063 22.4648L14.7678 21.0264C15.7459 20.5877 16.6296 19.9633 17.3704 19.1885C18.8827 17.6897 19.7558 15.6628 19.8059 13.5342C19.8559 11.4057 19.079 9.3406 17.6389 7.77246C16.1988 6.20435 14.2073 5.25508 12.0823 5.12402C9.95711 4.99302 7.86332 5.69081 6.24146 7.07031L4.88501 5.71094L4.94067 5.66309L5.12134 5.50977L5.22681 5.4248L5.32251 5.34668L5.34595 5.33105L5.40356 5.28516L5.49731 5.21387L5.58423 5.15039L5.63208 5.11328L5.70532 5.06055L5.72388 5.04688L5.81079 4.9873C5.92531 4.90943 6.03096 4.83855 6.13403 4.77441L6.22778 4.71484L6.37427 4.625L6.50708 4.54688L6.56958 4.51074C6.77346 4.3962 6.98447 4.28634 7.19751 4.18555L7.30298 4.13477H7.32056L7.38989 4.10547L7.51782 4.04785L7.6604 3.98828L7.80396 3.92871L7.89185 3.89453L8.01099 3.85059L8.08813 3.82129H8.10864L8.1731 3.79785L8.42798 3.71094L8.51001 3.68555L8.62427 3.65137L8.70044 3.62891H8.71411L8.77368 3.61035L8.85181 3.58984L8.95044 3.5625L9.07349 3.53027H9.11938L9.2981 3.48633L9.57056 3.42871L9.67212 3.41113H9.68774L9.76294 3.39746H9.77466L9.87524 3.37891C9.99663 3.35829 10.1184 3.3422 10.2444 3.32617L10.343 3.3125H10.4739L10.5901 3.30078H11.5461Z"
            fill="#080325"></path>
        </svg>
        <span id="_571_892" class="pointer-events-none"><span id="__0" class="text">Camelot</span></span>
      </div>
      <div id="Content">
        <div id="All_Wallet_Cards">
          <div id="Wallet_Cards">
            <div id="Wallet_card_row" class="pointer-events-none">
            </div>
          </div>
        </div>
      </div>
      <span id="_571_897" class="pointer-events-none"><span id="__1" class="text">Registrarme</span></span>
      <span id="_571_898" class="pointer-events-none"><span id="__2" class="text">Crea las opciones de tu punto de venta</span></span>
    </div>


    <form action="/req/signup" id="register-form" method="post">
      <div id="Table_Header">
        <input type="text" id="nombre" name="nombre" placeholder="Nombre" required>
      </div>
      <div id="Table_Header_0">
        <input type="text" id="apellidos" name="apellidos" placeholder="Apellidos" required>
      </div>
      <div id="Table_Header_1">
        <input type="email" id="email" name="email" placeholder="Correo electrónico" required>
      </div>
      <div id="Table_Header_2">
        <input type="password" id="contraseña" name="password" placeholder="Contraseña" required>
      </div>
      <div id="Table_Header_3">
        <input type="password" name="confirmar-contraseña" id="confirmar-con" placeholder="Repite la contraseña" required>
      </div>

      <button id="submit1" type="submit">
          <span id="__8" class="text">Registrarme</span>
      </button>
    </form>




    <span id="_571_899_">
      <span id="__9">
        <span id="__10" class="text">Ya tienes cuenta? </span>

        <a href="/login" style="text-decoration: underline; color: #000;">
          <span id="__11" class="text">Iniciar Sesión</span>
        </a>

      </span>
    </span>
  </div>

  <!-- POPUP (modal) -->
  <div id="popup" class="popup hidden" aria-hidden="true">
    <div class="popup-card">
      <div class="popup-icon" id="popupIcon">✓</div>
      <div class="popup-text">
        <h3 id="popupTitle">Éxito</h3>
        <p id="popupMsg">Registro exitoso</p>
      </div>
    </div>
  </div>


  <script>
    const submitButton = document.getElementById("submit1");

    // Popup helpers
    const popup = document.getElementById("popup");
    const popupTitle = document.getElementById("popupTitle");
    const popupMsg = document.getElementById("popupMsg");
    const popupIcon = document.getElementById("popupIcon");

    function showPopup({ title, message, type = "success" }) {
      popupTitle.textContent = title;
      popupMsg.textContent = message;

      const card = popup.querySelector(".popup-card");
      card.classList.remove("error");

      if (type === "error") {
        card.classList.add("error");
        popupIcon.textContent = "!";
      } else {
        popupIcon.textContent = "✓";
      }

      popup.classList.remove("hidden");
      popup.setAttribute("aria-hidden", "false");
    }

    function hidePopup() {
      popup.classList.add("hidden");
      popup.setAttribute("aria-hidden", "true");
    }

    // Si dan click fuera, se cierra (opcional)
    popup.addEventListener("click", (e) => {
      if (e.target === popup) hidePopup();
    });

    submitButton.addEventListener("click", async (e) => {
      e.preventDefault();

      const name = document.getElementById('nombre').value.trim();
      const password = document.getElementById('contraseña').value;
      const confirmPassword = document.getElementById('confirmar-con').value;
      const email = document.getElementById('email').value.trim();

      if (password !== confirmPassword) {
        showPopup({
          title: "Error",
          message: "Las contraseñas no coinciden",
          type: "error"
        });
        return;
      }

      const data = {
        name: name,
        email: email,
        password: password,
        rol: "USER"
      };

      try {
        const response = await fetch('/req/signup', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        if (response.ok) {
          showPopup({
            title: "Registro exitoso",
            message: "Redirigiendo al inicio…",
            type: "success"
          });

          setTimeout(() => {
            window.location.href = "/home"; // <-- aquí
          }, 2000);

        } else {
          const t = await response.text();
          showPopup({
            title: "Error",
            message: t || "No se pudo registrar",
            type: "error"
          });
        }

      } catch (err) {
        showPopup({
          title: "Error de red",
          message: String(err),
          type: "error"
        });
      }
    });
  </script>

</body>

</html>